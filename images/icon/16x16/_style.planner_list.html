<!--// XE ver.1.2.x 게시판을 이용한 플래너/음력달력-----------------------
##
## @Package:    xe_official_planner123 (board skin)
## @File name:	_style.planner_list.html
## @Author:     Keysung Chung (keysung2004@yahoo.co.kr)
## @Copyright:  © 2009 Keysung Chung(keysung2004@yahoo.co.kr)
## @Contributors: Clements J. SONG (http://clements.kyunggi.ca/ , clements_song@hotmail.com)
## @Release:	under GPL-v2 License.
## @License:	http://www.opensource.org/licenses/gpl-2.0.php
##
## Redistribution and use in source and binary forms, with or without modification, 
## are permitted provided that the following conditions are met:
## 
## Redistributions of source code must retain the above copyright notice, this list of 
## conditions and the following disclaimer.
## Redistributions in binary form must reproduce the above copyright notice, this list 
## of conditions and the following disclaimer in the documentation and/or other materials 
## provided with the distribution.
##
## Neither the name of the author nor the names of contributors may be used to endorse 
## or promote products derived from this software without specific prior written permission.
## 
## THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
## EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
## MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
## COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
## EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
## GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
## AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
## NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
## OF THE POSSIBILITY OF SUCH DAMAGE.
##
## [author]
##  - Keysung Chung, 2009, 07, 28
##  - http://chungfamily.woweb.net/
## [changes]
##  - PlannerXE123 ver. 3.2.0 : Keysung Chung, 2010, 10, 31
##  - PlannerXE123 ver. 3.1.0 : Keysung Chung, 2010, 10, 12
##  - PlannerXE123 ver. 2.1.0 : Keysung Chung, 2010, 09, 13
##  - PlannerXE123 ver. 2.0.0 : Keysung Chung, 2010, 09, 01
##  - PlannerXE123 ver. 1.7.0 : Keysung Chung, 2010, 08, 01
##  - PlannerXE123 ver. 1.6.0 : Keysung Chung, 2010, 07, 01
##  - PlannerXE123 ver. 1.5.0 : Keysung Chung, 2010, 06, 15
##  - PlannerXE123 ver. 1.4.0 : Keysung Chung, 2010, 06, 01
##  - PlannerXE123 ver. 1.3.0 : Keysung Chung, 2010, 05, 15
##  - PlannerXE123 ver. 1.2.0 : Keysung Chung, 2010, 05, 01
##  - PlannerXE123 ver. 1.1.0 : Keysung Chung, 2010, 04, 14
##  - PlannerXE123 ver. 1.0.0 : Keysung Chung, 2010, 04, 01
##  - PlannerXE123 ver. 0.3 : Keysung Chung, 2010, 02, 28
##  - PlannerXE123 ver. 0.2 : Keysung Chung, 2009, 11, 09
##  - PlannerXE123 ver. 0.1 : Keysung Chung, 2009, 07, 28
----------------------------------------------------------------------- -->
{@ $var_version = "PlannerXE123: Skin Ver 3.2.0"}
<!--// 모바일스킨에서 jquery 작동을 위해 추가함: 모바일 디폴트 스킨 쓰기 앞부분임-->
<!--@if($_COOKIE["mobile"])-->
{@ Context::addJsFile("./common/js/jquery.js", true, '', -100000) }
{@ Context::addJsFile("./common/js/js_app.js", true, '', -100000) }
{@ Context::addJsFile("./common/js/x.js", true, '', -100000) }
{@ Context::addJsFile("./common/js/common.js", true, '', -100000) }
{@ Context::addJsFile("./common/js/xml_handler.js", true, '', -100000) }
{@ Context::addJsFile("./common/js/xml_js_filter.js", true, '', -100000) }
<!--%import("../default/js/mboard.js")-->
<!--%import("../default/css/mboard.css")-->
<!--@endif-->
<!--// 모바일에서 쓰기가 정상 작동이 안되어 추가함 -->

{@ $linkpath = getUrl('','mid',$mid,'dummy',1,'offset',$offset)}
{@ $skinpath = $tpl_path;}  <!--// 스킨 설치 경로지정-->
{@ $XE_path = getUrl('')}
{@ $today_bgcolor="#CDE6AC"}   <!--// 달력의 당일 칸 배경색 -->
{@ $today_bodercolor="#58792E"}   <!--// 달력의 당일 칸 border 색 -->
{@ $mouseover_bgcolor="#ddfffa"}   <!--// 달력의 칸에 마우스오버시 배경색 #ddfffa -->
{@ $obj=null}   <!--// 클리어 쿼리검색 object-->
{@ $arr_plan=null}  <!--// 전역변수 처럼 작용되어 위젯, 스킨 모두에서 클리어함)--> 

<!--@if($module_info->calendar_bgcolor == null )-->
	{@ $day_bgcolor="white"}  <!--// 달력의 평일 칸 배경색 -->
<!--@else-->
	{@ $day_bgcolor=$module_info->calendar_bgcolor}  <!--// 달력의 평일 칸 배경색 -->
<!--@end-->
	{@ $day_bgcolor2="#fffacd"}  <!--// 달력의 평일 칸 배경색 2 주별 다른 배경색을 위하여-->

<!--//  CSS 인쿨르드 -->
<!--%import("./css/planner123_calendar.css")-->
<!--//  js 인쿨르드 -->
<!--%import("./js/plannerXE123_skin.js")--><!--// planner123 js -->

<!--//  function -->
<!--@if(!class_exists('planner123_main'))-->
    {@ require_once($skinpath.'function/class.planner123_main.php');}
<!--@end-->

<!--// 휴일/기념일 함수-->
{@ $ind_holiday_country = $module_info->holiday_country;}  
{@ $holiday_filename = planner123_main::fn_getHolidayFileName($skinpath,$ind_holiday_country);}
{@ require_once($skinpath.'function/'.$holiday_filename);}

<!--// 날자 설정 ---------------------------------- -->
<!--// Daylight saving time을 위해 Time zone을 지정할 수 있음 ( php4.대에서는 에러 발생, php5.1 이상에서 정상작동)-->
<!--// date_default_timezone_set('America/Toronto'); // 타임존목록 http://kr.php.net/manual/kr/timezones.php )예: America/Toronto-->
{@ $server_timestamp = mktime(date("H"), date("i"), date("s"), date("m"), date("d"), date("Y"));}
{@ $server_offset = date("Z");}
{@ $xe_timestamp = planner123_main::fn_xetimestamp();}
{@ $xe_offset = date("Z")+zgap();}
{@ $client_offset = Context::get('offset');}  <!--// url 변수로 받은 client offset-->
{@ $client_timestamp = mktime(date("H"), date("i"), date("s")-date("Z")+$client_offset, date("m"), date("d"), date("Y"));}

<!--// 화면에 보여줄 서버시간: 기본 XE시간으로 설정, 만약 default_timezone을 사용할 경우는 $server_timestamp, $server_offset 로 변경-->
{@ $display_timestamp = $xe_timestamp;}
<!--@if($client_offset == null )-->
	{@ $wrk_timestamp = $display_timestamp;}
<!--@else-->
	{@ $wrk_timestamp = $client_timestamp;}
<!--@end-->
<!--@if($pYear == null )-->
	{@ $pYear = date("Y", $wrk_timestamp);}
<!--@end-->
<!--@if($pMonth == null )-->
	{@ $pMonth = date("n", $wrk_timestamp);}
<!--@end-->
<!--@if($pMon == null )-->
	{@ $pMon = date("F", $wrk_timestamp);}
<!--@end-->
<!--@if($pDay == null )-->
	{@ $pDay = date("j", $wrk_timestamp);}
<!--@end-->
<!--@if($pOption < 1 || $pOption > 3 )-->
	{@ $pOption=1;}  <!--// 간지옵션-->
<!--@end-->

<!--// 날자 재계산-->
{@ $pYear =date("Y", mktime(0, 0, 0, $pMonth, 1, $pYear));}
{@ $pMonth =date("n", mktime(0, 0, 0, $pMonth, 1, $pYear));}
{@ $pMon =date("F", mktime(0, 0, 0, $pMonth, 1, $pYear));} <!--// 당월 이름-->
{@ $todayYY = date("Y", $wrk_timestamp);}  <!--// 당일년도-->
{@ $todayMM = date("n", $wrk_timestamp);}  <!--// 당일월-->
{@ $todayDD = date("j", $wrk_timestamp);}  <!--// 당일일-->

<!--// 달력일자, 휴일(달력일자 붉은색표시를 위해..) 구하기-->
{@ $Calmain = planner123_main::fn_CalMain($pYear,$pMonth);}  <!--// 달력일자-->
{@ $Holiday = planner123_holiday::fn_HolidayChk($pYear, $pMonth, $skinpath);}  <!--// 휴일-->

<!--@if($module_info->display_holiday == 'Y')-->  <!--// 휴일표시-->
{@ $ind_holiday = "Y";}
<!--@end-->
<!--@if($module_info->display_memday == 'Y')-->  <!--// 기념일표시-->
{@ $Memday = planner123_holiday::fn_MemdayChk($pYear, $pMonth, $skinpath);}
{@ $ind_memday = "Y";}
<!--@end-->
<!--@if($module_info->display_lunar == 'Y')-->  <!--// 음력표시 1,10,15,20일 -->
{@ $Lunarday = planner123_main::fn_sol2lun_ary($pYear,$pMonth);}
{@ $ind_lunar = "Y";}
<!--@end-->
<!--@if($module_info->display_lunar == 'Y_all')-->  <!--// 음력일자 - 모든날자-->
{@ $Lunarday = planner123_main::fn_sol2lun_ary($pYear,$pMonth);}
{@ $ind_lunar_all = "Y";}
<!--@end-->

<!--@if($module_info->display_24term == 'Y' || $module_info->display_iljin == 'Y')-->
{@ $GanjiJeolki = planner123_main::fn_jeolki_ganji_ary($pYear,$pMonth,$pOption);}  <!--// 간지 절기(V300 에서 $pMonth 추가)-->
<!--@end-->
<!--@if($module_info->display_24term == 'Y')-->
{@ $ind_24term = "Y";}
<!--@end-->
<!--@if($module_info->display_iljin == 'Y')-->
{@ $ind_iljin = "Y";}
<!--@end-->

{@ $ind_use_category = $module_info->use_category;}  <!--// 분류(카테고리) 사용여부-->
{@ $ind_bgcolor_option = $module_info->use_category_bgcolor;}  <!--// 일정 배경색상 옵션-->
{@ $ind_image_diary = $module_info->image_diary;}  <!--// 그림일기 사용여부-->
{@ $ind_complete_doc = $module_info->display_complete_doc;}  <!--// 완료일정 표시여부-->
{@ $ind_duplicated_schedule = $module_info->duplicated_schedule;}  <!--// 중복일정 허용여부-->

<!--// planner123 문서목록 얻기---------------------------------- -->
<!--// 검색년월 및 목록수 설정------ -->
{@ $tempmonth = substr("0".$pMonth, -2);}  <!--//월 을 "7" 에서 "07"로-->
{@ $list_count = $module_info->list_count;} <!--//목록수-->
{@ $page_count = $module_info->page_count;}  <!--//목록수-->

<!--// 검색 Target에 따른 검색필드 설정.-->
<!--@if($search_keyword != null)-->
    <!--@if($search_target == 'title')-->
		{@ $obj->var_search_title = $search_keyword;}
    <!--@elseif($search_target == 'content')-->
		{@ $obj->var_search_content = $search_keyword;}
    <!--@elseif($search_target == 'title_content')-->
		{@ $obj->var_search_content = $search_keyword;}
    <!--@elseif($search_target == 'user_name')-->
        {@ $obj->var_search_user_name = $search_keyword;}
    <!--@elseif($search_target == 'nick_name')-->
        {@ $obj->var_search_nick_name = $search_keyword;}
    <!--@elseif($search_target == 'user_id')-->
        {@ $obj->var_search_user_id = $search_keyword;}
    <!--@elseif($search_target == 'tag')-->
        {@ $obj->var_search_tags = $search_keyword;}
    <!--@else-->
         <!--@if(strpos($search_target,'extra_vars')!==false)-->
            {@ $obj->var_search_extra_idx = substr($search_target, strlen('extra_vars'));}
            {@ $obj->var_search_extra_value = str_replace(' ','%',$search_keyword);}
         <!--@end-->
    <!--@end-->
<!--@end-->

<!--// 분류필드 설정--- -->
<!--@if($module_info->use_category == "Y")-->
{@ $tmp_category = Context::get('category_list');}  <!--// 분류srl 얻기 (1단계만 지원, 그룹제한 고려 않음)-->
<!--@if(!$tmp_category)-->
	{@ $tmp_category = array();}
<!--@end-->
{@ $wrk_var_category_srl = "0";}  <!--// 디폴트-->
<!--@foreach($tmp_category as $val)-->
	{@ $wrk_var_category_srl .= ",".$val->category_srl;}
    <!--@if($val->selected)-->
	    {@ $obj->var_category_srl = $val->category_srl;}
	<!--@end-->
<!--@end-->
<!--@if(!$obj->var_category_srl)-->
    {@ $obj->var_category_srl = $wrk_var_category_srl;}
<!--@end-->
<!--@end-->

<!--// loged member --- -->
{@ $module_srl = $module_info->module_srl;}  <!--// module srl (drag&drop 에서 사용)-->
{@ $module_name = $module_info->module;}  <!--// module name (drag&drop 에서 사용)-->
{@ $member_temp_name = $logged_info->nick_name;}  <!--// 공개그룹 user에 nick_name 이용-->
<!--// {@ $member_temp_name = $logged_info->user_name;}  공개그룹 user에 user_name 이용 -->
{@ $member_srl = $logged_info->member_srl;}
{@ $group_list = $logged_info->group_list;}
{@ $usergroup_arr = array();}
<!--@if($member_srl != null)-->
	{@ $obj->var_member_srl = $member_srl;}  <!--// user srl-->
    <!--@foreach($group_list as $key => $val)-->
       {@ $group_titles .= ",".$val;}
	<!--@end-->
    {@ $group_titles=substr($group_titles,1);}  <!--// 사용자가 소속된 그룹명칭-->
	{@ $usergroup_arr = explode(",",$group_titles);}
<!--@end-->

<!--// 쿼리 설정/실행/list만들기--- -->
{@ $obj->site_srl = '';}  <!--// 0을 넣으면 이상해짐-->
{@ $obj->module_srl = $module_info->module_srl;}
{@ $obj->sort_index_1 = 'extra_value_end';}  <!--// (일정시작 일) start를 end로(2010-08-01)-->
{@ $obj->order_type_1 = 'desc';}
{@ $obj->sort_index_default_1 = 'extra_value_start';}	
{@ $obj->sort_index_2 = 'extra_value_time';}  <!--// (시작종료 시간)-->
{@ $obj->order_type_2 = 'asc';}
{@ $obj->sort_index_default_2 = 'extra_value_time';}
{@ $obj->sort_index = $module_info->order_target;}  <!--// (게시판 문서 정렬 번호)-->
{@ $obj->order_type = $module_info->order_type;}
{@ $obj->sort_index_default = 'list_order';}  <!--// 게시판설정 선택값이 null 일때-->
{@ $obj->list_count = $list_count*10;}  <!--// 게시판 설정값 10배의 일정표시 (예:기본 20일때 200개까지)-->
{@ $obj->page_count = $page_count;}  <!--// 게시판 설정값-->
{@ $obj->var_idx1 = '1';}  <!--// 확장변수1번: sort target(일정시작)- 통상 값이 있음-->
{@ $obj->var_idx2 = '2';}  <!--// 확장변수2번: sort targer(일정종료)- 대부분의 경우 null 값임-->
{@ $obj->var_idx7 = '7';}  <!--// 확장변수7번: 시작종료시간-->
{@ $obj->var_idx8 = '8';}  <!--// 확장변수8번: 공개그룹-->
{@ $obj->var_period_start = $pYear.$tempmonth."01";}  <!--// 선택 범위시작 - 당월 01일 >= -->
{@ $obj->var_period_end = $pYear.$tempmonth."31";}  <!--// 선택 범위  끝 - 당월 31일 <= -->
{@ $obj->var_fld_null = null;}  <!--// 0을 null로 (0일 경우 레코드 없으면 안됨 -> 추후 값이없는 확장변수 레코드 삭제를 고려하여 null로 변경)-->

{@ $query_path = $module_info->module."/skins/".$module_info->skin;}  <!--// 쿼리경로-->
{@ $view_group = $module_info->default_document_group;}  <!--// 스킨에서 정해준 일반사용자가 볼수있는 문서그룹-->

<!--@if($grant->manager)-->
	{@ $output = executeQueryArray($query_path.'.getDocumentsForPlanner_all', $obj);}  <!--// 관리자 (모든문서)-->
<!--@elseif($module_info->consultation == "Y")-->
	{@ $output = executeQueryArray($query_path.'.getDocumentsForPlanner_own', $obj);}  <!--// 상담기능 (자신 + 공지)-->
<!--@elseif($view_group == "owner")-->
	{@ $output = executeQueryArray($query_path.'.getDocumentsForPlanner_own', $obj);}  <!--// 자신 + 공지-->
<!--@elseif($view_group == "usergroup")-->
	{@ $output = executeQueryArray($query_path.'.getDocumentsForPlanner_group', $obj);}  <!--// 자신 + 공지 + 공개그룹소속-->
<!--@elseif($view_group == "nonsecured")-->
	{@ $output = executeQueryArray($query_path.'.getDocumentsForPlanner_nonSec', $obj);}  <!--// 타인 비밀글및 비멤버쉽 문서 제외-->
<!--@elseif($view_group == "alldocument")-->
	{@ $output = executeQueryArray($query_path.'.getDocumentsForPlanner_all', $obj);}  <!--// 모든문서-->
<!--@else-->
	{@ $output = executeQueryArray($query_path.'.getDocumentsForPlanner_all', $obj);}  <!--// 모든문서-->
<!--@end-->

<!--// 문서 목록 생성 -->
<!--@if(count($output->data))-->
  <!--@foreach($output->data as $key => $attribute)-->
    {@ $tmp_document_srl = $attribute->document_srl;}
    {@ $tmp_Document = null;}
    {@ $tmp_Document = new documentItem();}
    {@ $tmp_Document->setAttribute($attribute, false);}
    {@ $tmp_Document->category_srl = $attribute->category_srl;}
    {@ $tmp_opengroup_arr = explode("|@|",$attribute->extra_value_group);}
    <!--@if($module_info->consultation == 'Y')-->  <!--// 상담기능 일때-->
        <!--@if($grant->manager)-->
            {@ $tmp_document_list[$key] = $tmp_Document;}  <!--// 상담기능-관리자이면 전체 문서를 처리,-->
        <!--@else-->
            <!--@if($attribute->is_notice == "Y" || $attribute->member_srl == $member_srl)-->
                {@ $tmp_document_list[$key] = $tmp_Document;}  <!--// 상담기능-관리자 아니면 공지문서나 자신의 문서이면 처리.-->
            <!--@end-->
        <!--@end-->
    <!--@else-->  <!--// 상담기능 아닐때-->
        <!--@if($grant->manager)-->  <!--// 관리자면 전체 문서를 처리,-->
            {@ $tmp_document_list[$key] = $tmp_Document;}
        <!--@elseif($view_group == "alldocument")-->  <!--// 문서그룹이 alldocument 이면 전체 문서를 처리,-->
            {@ $tmp_document_list[$key] = $tmp_Document;}
		<!--@elseif($attribute->is_notice == "Y" || $attribute->member_srl == $member_srl)-->  <!--// 자신또는 공지문서면 처리 (owner동시처리)-->
            {@ $tmp_document_list[$key] = $tmp_Document;}
        <!--@elseif($view_group == "nonsecured")-->
            {@ $tmp_flag = null;}
            {@ $tmp_group_01 = $tmp_opengroup_arr[0];}
            <!--@if($attribute->is_secret == "N")-->  <!--// 일반문서 처리-->
                <!--@if($tmp_opengroup_arr == null || $tmp_group_01 == null)-->  <!--// 공개그룹 없는 일반문서-->
                    {@ $tmp_flag = "*";}
                <!--@elseif(count($tmp_opengroup_arr) == 1 && ($attribute->nick_name == $tmp_group_01 || $attribute->user_name == $tmp_group_01))-->
                    {@ $tmp_flag = "*";}  <!--// 공개그룹 요소가 1개이면서 이것이 작성자 닉네임 또는 이름이면 일반문서(공개그룹문서 아님)-->
				<!--@else-->
                    <!--@foreach($usergroup_arr as $tmp_key => $val_tmp)-->
                        <!--@if(in_array($val_tmp, $tmp_opengroup_arr))-->  <!--// 공개그룹 소속.-->
                            {@ $tmp_flag = "*";}
                        <!--@end-->
                    <!--@end-->
                    <!--@if($member_temp_name != null && in_array($member_temp_name, $tmp_opengroup_arr))-->  <!--// 공개 nick_name.-->
                        {@ $tmp_flag = "*";}
                    <!--@end-->
                <!--@end-->
		        <!--@if($tmp_flag == "*")-->
				    {@ $tmp_document_list[$key] = $tmp_Document;}  <!--//  조건맞는 문서 처리,-->
			    <!--@end-->
            <!--@end-->
        <!--@elseif($view_group == "usergroup")-->
            {@ $tmp_flag = "";}
			<!--@if($attribute->is_secret == "N")-->  <!--// 일반문서 처리-->
                <!--@if($tmp_opengroup_arr != null)-->  <!--// 공개그룹 있을때.-->
                    <!--@foreach($usergroup_arr as $tmp_key => $val_tmp)-->
                        <!--@if(in_array($val_tmp, $tmp_opengroup_arr))-->  <!--// 공개그룹 소속.-->
                            {@ $tmp_flag = "*";}
                        <!--@end-->
                    <!--@end-->
                    <!--@if($member_temp_name != null && in_array($member_temp_name, $tmp_opengroup_arr))-->  <!--// 공개 nick_name.-->
                        {@ $tmp_flag = "*";}
                    <!--@end-->
                <!--@end-->
		        <!--@if($tmp_flag == "*")-->
				    {@ $tmp_document_list[$key] = $tmp_Document;}  <!--//  조건맞는 문서 처리,-->
			    <!--@end-->
            <!--@end-->
		<!--@end-->
    <!--@end-->  <!--// 상담기능 끝-->
  <!--@end-->  <!--// foreeach 끝-->
<!--@else-->
    {@ $tmp_document_list = array();}          
<!--@end-->
{@ $document_list = $planner123_document_list = $tmp_document_list;}
<!--// planner123 문서목록 얻기 끝---------------------------------- -->

<!--// Xe 확장변수 변수를 작업 ($key 등은 board설정시 목록에 포함되어야 들어옴)  -->
<!--@foreach($planner123_document_list as $no => $document)-->
	<!--// Category title & color값 얻기  -->
	<!--@if($module_info->use_category == "Y" && $document->get('category_srl'))-->
		<!--@if($category_list[$document->get('category_srl')]->color)-->
		{@ $category_color = $category_list[$document->get('category_srl')]->color}
		<!--@end-->
		{@ $category_title = $category_list[$document->get('category_srl')]->title}
	<!--@else-->
		{@ $category_color = null}
		{@ $category_title = null}
    <!--@end-->

	<!--// 댓글 숫자 얻기  -->
    <!--@if($document->getCommentCount())-->
        {@ $plan_reply = $document->getCommentCount()}
	<!--@else-->
        {@ $plan_reply = null}
	<!--@end-->

	<!--// 확장변수값 얻기  -->
	<!--@foreach($list_config as $key => $val)-->
		<!--@if($val->idx == -1)-->
		<!--@else-->
			<!--@if($val->idx == 1)-->
			{@ $plan_start = $document->getExtraValue($val->idx)}	
			{@ $plnstartYY = substr($plan_start,0,4)}
			{@ $plnstartMM = substr($plan_start,4,2)} 
			{@ $plnstartDD = substr($plan_start,6,2)}
			{@ $plnstartMM = ltrim( $plnstartMM, "0" );}  <!--//  앞의 "0" 제거-->
			{@ $plnstartDD = ltrim( $plnstartDD, "0" );}  <!--//  앞의 "0" 제거-->
			{@ $plan_title = $document->getTitle($module_info->subject_cut_size)}
			{@ $plan_detail = $document->getSummary($module_info->content_cut_size)}
			{@ $plan_doc_extra_vars = $document->get('extra_vars')}    <!--// 취소일정을 위해 추가 -->
			{@ $plan_docsrl = $document->document_srl}
			{@ $plan_url = getUrl('document_srl',$document->document_srl, 'listStyle', $listStyle, 'cpage','','offset',$offset)}
			  <!--@if($_COOKIE["mobile"])--> <!--// 모바일일때 그림 사이즈작게 mobile::isFromMobilePhone() 함수를 쿠키로 대체-->
	            {@ $plan_img = null}
	             <!--// {@ $plan_img = $document->getThumbnail(45, 45, $module_info->thumbnail_type)} -->
			  <!--@else-->
	            {@ $plan_img = $document->getThumbnail($module_info->thumbnail_width, $module_info->thumbnail_height, $module_info->thumbnail_type)}
			  <!--@endif-->
			<!--@end-->
			<!--@if($val->idx == 2 )-->
			{@ $plan_end = $document->getExtraValue($val->idx)}		
			  <!--@if($plan_end == null )-->
			  {@ $plan_end = $plan_start}
			  <!--@end-->
			{@ $plnendYY = substr($plan_end,0,4)}
			{@ $plnendMM = substr($plan_end,4,2)} 
			{@ $plnendDD = substr($plan_end,6,2)}
			{@ $plnendMM = ltrim( $plnendMM, "0" );}  <!--// 일자 앞의 "0" 제거-->
			{@ $plnendDD = ltrim( $plnendDD, "0" );}  <!--// 일자 앞의 "0" 제거-->
			<!--@end-->
			<!--@if($val->idx == 3 )-->
			{@ $plan_bgcolor = $document->getExtraValueHTML($val->idx)}  <!--// 배경색상-->
			<!--@end-->
			<!--@if($val->idx == 4 )-->
			{@ $plan_flagicon = $document->getExtraValueHTML($val->idx)}  <!--// 일정확인-->
			<!--@end-->
			<!--@if($val->idx == 5 )-->
			{@ $plan_repeat_cycle = $document->getExtraValueHTML($val->idx)}  <!--// 반복일정 cycle-->
			<!--@end-->
			<!--@if($val->idx == 6 )-->
			{@ $plan_repeat_unit = $document->getExtraValueHTML($val->idx)}  <!--// 반복일정 unit-->
			<!--@end-->
            <!--@if($val->idx == 7 )-->
            {@ $plan_time = $document->getExtraValueHTML($val->idx)}  <!--// 시작종료시간 (09:00, 09:30, 10:00,.. 형식)-->
            <!--@end-->
		<!--@end-->
	<!--@end-->  <!--// 확장변수값 얻기 끝 foreach  -->

    <!--// 새글 이미지값 얻기  -->
    {@ $plan_new = $document->printExtraImages(60*60*$module_info->duration_new)}

<!--@if($plnstartYY != null)-->
	<!--@if($plnstartYY == $pYear && $plnstartMM == $pMonth)-->  <!--// 당월 시작 이면서 당월 이후 종료-->
		<!--@if(($plnendYY > $pYear) || (($plnendYY == $pYear) && ($plnendMM > $pMonth)))-->
			{@ $plnendYY = $pYear;}
			{@ $plnendMM = $pMonth;}
			{@ $plnendDD = 31;}
		<!--@end-->
	<!--@elseif(($plnstartYY < $pYear) || (($plnstartYY == $pYear) && ($plnstartMM < $pMonth)))-->  <!--// 당월 이전 시작 이면서 당월 종료-->
		<!--@if($plnendYY == $pYear && $plnendMM == $pMonth)-->
			{@ $plnstartYY = $pYear;}
			{@ $plnstartMM = $pMonth;}
			{@ $plnstartDD = 1;}
		<!--@end-->
		<!--@if(($plnendYY > $pYear) || (($plnendYY == $pYear) && ($plnendMM > $pMonth)))-->  <!--// 당월 이전시작 이면서 당월 이후 종료-->
			{@ $plnstartYY = $pYear;}
			{@ $plnstartMM = $pMonth;}
			{@ $plnstartDD = 1;}
			{@ $plnendYY = $pYear;}
			{@ $plnendMM = $pMonth;}
			{@ $plnendDD = 31;}
		<!--@end-->
	<!--@end-->

    <!--// qtip 미사용으로 인해 아래 3째줄 주석처리-->
	{@ $plan_detail = str_replace("'", "`", $plan_detail);}  <!--// '을 `로 대체 textbox보이기위해-->
	{@ $plan_detail = str_replace("\"", "&quot;", $plan_detail);}  <!--// "를 &quot;로 대체 textbox보이기위해-->
    <!--//{@ $plan_detail = str_replace(chr(12), "<br />", $plan_detail);}  <!--// FF를 제거 textbox보이기위해-->

	<!--// 취소일정위해 추가-->
	<!--// ('A'=>'기본', 'F'=>'완료', 'R'=>'취소');  // 기본: 최초는 null, 수정하면 A-->
	{@ $_doc_extra_vars = explode(";", $plan_doc_extra_vars);}
	{@ $_doc_extra_vars1 = explode(":", $_doc_extra_vars[0]);}
	{@ $_doc_status = str_replace("\"", "", $_doc_extra_vars1[2]);}
	<!--@if($_doc_status == "F" && $ind_complete_doc == "L")-->
	{@ $plan_title = "<span class='complete'>".$plan_title."</span>";}  <!--// 완료일정 제목에 취소선 긋기-->
	<!--@end-->

	<!--@if($_doc_status != "R" && ($ind_complete_doc == "N" && $_doc_status != "F" || $ind_complete_doc != "N") )-->  <!--// 취소일정이 아닐때 처리-->
	<!--@if($plnstartYY == $pYear && $plnstartMM == $pMonth)-->  <!--// 일정관련자료 어레이에 출력-->
	  {@ $arr_repeat = planner123_main::fn_repeat_schedule($pYear, $pMonth, $plan_start, $plan_end, $plan_repeat_cycle, $plan_repeat_unit);}
	  <!--@For($i = $plnstartMM; $i <= $plnendMM; $i++)-->
		<!--@For($j = $plnstartDD; $j <= $plnendDD; $j++)-->
			<!--@if($arr_repeat[$i][$j] == "*")-->
				<!--@if($arr_plan[$i][$j])--> <!--// 비어있지 않으면 일정 구분자(1차분리자) 추가-->
					{@ $arr_plan[$i][$j] .="|#&Oslash;#|"}
				<!--@end-->
				{@ $arr_plan[$i][$j] .= $plan_title."|&Oslash;|".$plan_url."|&Oslash;|".$plan_detail."|&Oslash;|".$plan_bgcolor."|&Oslash;|".$plan_flagicon."|&Oslash;|".$category_title."|&Oslash;|".$category_color."|&Oslash;|".$plan_reply."|&Oslash;|".$plan_time."|&Oslash;|".$plan_new."|&Oslash;|".$plan_img."|&Oslash;|".$plan_length."|&Oslash;|".$plan_docsrl."|&Oslash;|".$plan_start."|&Oslash;|".$plan_end;}  <!--// 어레이에 추가 1차분리자= "|#&Oslash;#|", 2차 분리자 "|&Oslash;|"-->
			<!--@end-->
		<!--@end--> <!--// for 끝-->
	  <!--@end--> <!--// for 끝-->
	<!--@end-->	<!--// 일정관련자료 어레이에 출력 끝-->
	<!--@end-->  <!--// 취소일정이 아닐때 처리 끝-->

<!--@end-->  <!--// if($plnstartYY != null ) 끝-->
<!--@end-->  <!--// foreach($planner123_document_list as $no => $document) 끝-->

<!--// -----달력작성 ----------------------- -->
<style type="text/css">
/* {$var_version} */
.planner_list thead th { border:1px solid #ccc; height:27px; background: url({$skinpath}images/calendar/tablehd_bg.png) repeat-x; }
.planner_list tbody .today_bg { background:{$today_bgcolor}; border:medium solid; border-color:{$today_bodercolor}; }
.planner_list tbody .day_bgcolor { background:{$day_bgcolor};  }
.planner_list tbody .day_bgcolor2 { background:{$day_bgcolor2};  }
.planner_list tbody .today_bgcolor { background:{$today_bgcolor};  }
.planner_list tbody .brd_left { border-left: medium solid {$today_bodercolor}; }
.planner_list tbody .brd_bottom { border-bottom: medium solid {$today_bodercolor}; }
.planner_list tbody .brd_top { border-top: medium solid {$today_bodercolor}; }
.planner_list tbody .brd_right { border-right: medium solid {$today_bodercolor}; }
.planner_list tbody .brd_all { border:medium solid; border-color:{$today_bodercolor}; }
</style>

<!--@if($device == big_size )--> <!--// for big_calendar -->
<style type="text/css">
#columnLeft, .columnLeft, .bloozLeft, .bread-left, .bread-crumb {display:none;}
#columnRight, .columnRight, #bloozLayout .bloozRight {background:none; width:100%;}
</style>
<!--@end-->

<!--@if($device == printer )--> <!--// for print -->
<style type="text/css">
body, #contentBody {color : #000000; background : #FFFFFF;}
#header, #footer, #columnLeft, .boardInformation {display:none;}

#top, #menu, .columnLeft, .bloozLeft, .bread-crumb, .bread-left, .boardInformation {display:none;}
#columnRight, .columnRight, #bloozLayout .bloozRight {background: #FFFFFF; width:100%; padding:0px; border:none;}

.planner_navigation {display:none;}
.planner_list tbody .today_bg { background:{$day_bgcolor}; border:1px solid #ccc;}
.planner_list tbody .today_date_bg { background:{$day_bgcolor};}
.planner_list tbody .brd_all { border:none;}
.planner_list tbody .today_bgcolor { background:{$day_bgcolor};  }
</style>
<!--@end-->

<div id='planner123' class="planner123">
    <!--//  버튼 -->
    <div class="planner_control">
        <div class="planner_this">
            <!--//숫자형식으로 년월 표시-->
            <!--//    <font size="4" COLOR=green><b>{$pYear}年 {$pMonth}月&nbsp;&nbsp;({$pYear+2333})</b></font>-->
            <!--//영문형식으로 년월 표시-->
            {$pMon}&nbsp;{$pYear}
		</div>
        <div class="planner_navigation">
			<form style="float:left; width:65px;" name = "fm_select_year">
			<select style ="height:17px; margin:0; padding:0; font-size:11px;" name="selectyear" onchange="document.location.href='{$linkpath}&amp;pOption={$pOption}&amp;pYear=' + this.options[this.selectedIndex].value +'&amp;pMonth={$pMonth}'">
			<option value='{$pYear}'>{$pYear}</option>
			<!--@for($j=$todayYY+10; $j>=$todayYY-5; $j--)-->
				<option value='{$j}'>{$j}</option>") 
			<!--@end-->
			</select></form>
			<!--@if(!$_COOKIE["mobile"])-->
            <img  style="float:left;" src="{$skinpath}images/calendar/month_t.gif" width="39" height="15" />
			<a href="{$linkpath}&amp;pOption={$pOption}&amp;pYear={$pYear}&amp;pMonth={$pMonth-1}&amp;pDay="><img  style="float:left;" src="{$skinpath}images/calendar/btn_prev_year.gif" width="17" height="15" title="전월" /></a>
			<!--@for($i=1; $i < 13; $i++)-->
			<a style="float:left;" href="{$linkpath}&amp;pOption={$pOption}&amp;pYear={$pYear}&amp;pMonth={$i}&amp;pDay="><img src="{$skinpath}images/calendar/month_{$i}<!--@IF($pMonth == $i)-->_on<!--@end-->.gif" width="17" height="15" title="{$i}월" /></a>
			<!--@end-->
			<!--@else-->
			<a href="{$linkpath}&amp;pOption={$pOption}&amp;pYear={$pYear}&amp;pMonth={$pMonth-1}&amp;pDay="><img  style="float:left;" src="{$skinpath}images/calendar/btn_prev_year.gif" width="17" height="15" title="전월" /></a>
            <span  style="float:left;"><a href="{$linkpath}&amp;pOption={$pOption}&amp;pYear={$todayYY}&amp;pMonth={$todayMM}&amp;pDay=">T-Mon</a></span>
			<!--@endif-->
            <a style="float:left;" href="{$linkpath}&amp;pOption={$pOption}&amp;pYear={$pYear}&amp;pMonth={$pMonth+1}"><img src="{$skinpath}images/calendar/btn_next_year.gif" width="17" height="15" title="익월" /></a>
        </div>
    </div>
	<!-- 카테고리 탭 출력 -->
	<!--@if($module_info->use_category == "Y")-->
	<div style="clear:both;">
		<!--@if(!$category)-->
			<button title='분류전체' type="button" id="btn_all" onclick="doChgCategory(); return false;" class="button" style='font-size:12px; padding:0; cursor:pointer; color:#000000;'><span class="strong">분류전체</span></button>
		<!--@else-->
			<button title='분류전체' type="button" id="btn_all" onclick="doChgCategory(); return false;" class="button" style='font-size:12px; padding:0; cursor:pointer; color:#000000;'>분류전체</button>
		<!--@end-->    
		<!--@foreach($category_list as $val)-->
			<!--@if($category==$val->category_srl)-->
				<button title='{$val->title}' type="button" id={$val->title} onclick="doChgCategory({$val->category_srl}); return false;" class="button" style='font-size:12px; padding:0; cursor:pointer; color:{$val->color};'><span class="strong" >{$val->title}</span></button>
			<!--@else-->
				<button title='{$val->title}' type="submit" id={$val->title} onclick="doChgCategory({$val->category_srl}); return false;" class="button" style='font-size:12px; padding:0; cursor:pointer; color:{$val->color};'>{$val->title}</button>
			<!--@end-->
		<!--@end-->                           
	</div>
	<!--@end-->

    <!--//  달력 -->
    <table class="planner_list" summary="플래너123">
        <thead>
            <tr>
                <th scope="col" width="21%" colspan="2">Date</th>
                <th scope="col" width="*">Schedule</th>
                <th scope="col" width="17%">Note</th>
            </tr>
        </thead>
        <tbody>

        {@ $weekcount = count($Calmain);}
        <!--@for($i=0; $i<$weekcount; $i++)-->
            <!--@for($j=0; $j<7; $j++)-->
                <!--@if($Calmain[$i][$j] != "*")-->  <!--//  달력상의 빈날제거-->

				<!--@if($pYear == $todayYY && $pMonth == $todayMM && $Calmain[$i][$j] == $todayDD)-->
					{@ $tr_bgcolor = "class='today_bgcolor'";}
					{@ $td_left = "";}
					{@ $td_middle = "class = 'plan brd_all'";}
					{@ $td_right = "";}
				<!--@else-->
					<!--@if($i%2)-->
						{@ $tr_bgcolor = "class='day_bgcolor'";}
						{@ $td_left =   "";}
						{@ $td_middle = "class = 'plan'";}
						{@ $td_right =  "";}
					<!--@else-->
						{@ $tr_bgcolor = "class='day_bgcolor2'";}  <!--// 주별 배경색 변경을 위해..-->
						{@ $td_left =   "";}
						{@ $td_middle = "class = 'plan'";}
						{@ $td_right =  "";}
					<!--@end-->
				<!--@end-->

                <tr {$tr_bgcolor} onMouseOut="this.style.backgroundColor=''" onMouseOver="this.style.backgroundColor='{$mouseover_bgcolor}'">
                    {@ $tmpfld_1 = null;}
                    {@ $outtext = null;}
                    {@ $k = $Calmain[$i][$j];}

                    <!--@if($Calmain[$i][$j]== "*")-->
                        {@ $Calmain[$i][$j]=null;}
                    <!--@else-->
                        {@ $tempday=$Calmain[$i][$j];}

                        <!--// 해당일의 음력일자,절기,합삭,망,12궁,휴일,기념일 얻기--->
                        {@ $tmparr=explode("-",$Lunarday[$pMonth][$Calmain[$i][$j]]);}  <!--//음력날자-->
                        <!--@if($tmparr[3] == "윤달")-->
                            {@ $youndal = "윤";}
                        <!--@else-->
                            {@ $youndal = null;}
                        <!--@end-->

                        {@ $tmpfld1 ="".$youndal.$tmparr[1]."-".$tmparr[2]."";}
                        {@ $tmparr2=explode("-",$GanjiJeolki[$pMonth][$Calmain[$i][$j]]);}  <!--// 24절기-->
                        {@ $tmparr4=explode("-",$Holiday[$pMonth][$Calmain[$i][$j]]);}  <!--// 공휴일-->
                        {@ $tmparr5=explode("-",$Memday[$pMonth][$Calmain[$i][$j]]);}   <!--// 기념일-->
                        {@ $tmparr6=explode("|#&Oslash;#|",$arr_plan[$pMonth][$Calmain[$i][$j]]);}<!--// 일정/플랜  1차 "|#&Oslash;#|",로 분리-->

                        <td width='5%' {$td_left}>
                        <!--// 첫칸 왼쪽1 (일자) -->
                        {@ $outtext = "";}

                        <!--@if($j==0 || $tmparr4[0] != null)-->
                            {@ $tmpfld = "<span class='holiday strong font_big'>".$Calmain[$i][$j]."</span>";}  <!--// 일요일 및 휴일-->
                        <!--@elseif($j==6)-->
                            {@ $tmpfld = "<span class='saturday strong font_big'>".$Calmain[$i][$j]."</span>";}  <!--// 토요일-->
                        <!--@else-->
                            {@ $tmpfld = "<span class='weekday strong font_big'>".$Calmain[$i][$j]."</span>";}  <!--// 평일-->
                        <!--@end-->

					    <!--// 중복일정금지 및 과거일자는 링크없이.-->
					    <!--@if($ind_duplicated_schedule == 'N' && mktime(0,0,0,$pMonth,$Calmain[$i][$j],$pYear) < mktime(0,0,0,$todayMM,$todayDD,$todayYY) )-->  
		                    {@ $templink = "<a href='#' style='cursor:no-drop;'>".$tmpfld."</a>";}		
		 			    <!--@else-->
                            {@ $templink = getUrl('act','dispBoardWrite','document_srl','') ;}  <!--// 일자 클릭시 쓰기로 이동-->
                            {@ $templink .= "&amp;extra_vars1=$pYear-$tempmonth-".substr("0".$tempday,-2);} <!--// 일정시작 확장변수에 값 넣기위해-->
                            {@ $templink = "<a href=".$templink.">".$tmpfld."</a>";}<!--// 일자-->
					    <!--@end-->
                        {@ $outtext = "<li style='height:30px; text-align:left; padding-left:5px;'>".$templink."";}

                        <!--// 첫칸 왼쪽2 --요일----->
                        <!--@if($j==0)-->
							{@ $tmpfldw = "<span class='holiday'>Sun</span>";} <!--// 일요일-->
                        <!--@elseif($j==1)-->
							{@ $tmpfldw = "<span class='weekday'>Mon</span>";} <!--// 월요일-->
                        <!--@elseif($j==2)-->
							{@ $tmpfldw = "<span class='weekday'>Tue</span>";} <!--// 화요일-->
                        <!--@elseif($j==3)-->
							{@ $tmpfldw = "<span class='weekday'>Wed</span>";} <!--// 수요일-->
                        <!--@elseif($j==4)-->
							{@ $tmpfldw = "<span class='weekday'>Thu</span>";} <!--// 목요일-->
                        <!--@elseif($j==5)-->
							{@ $tmpfldw = "<span class='weekday'>Fri</span>";} <!--// 금요일-->
                        <!--@elseif($j==6)-->
							{@ $tmpfldw = "<span class='saturday'>Sat</span>";} <!--// 토요일-->
					    <!--@end-->

                        {@ $outtext .= " ".$tmpfldw."</li>";}
                        {@ $outtext = "<ul>".$outtext."</ul>";}
                        {$outtext}  <!--// 요일 출력-->
						{@ $outtext = null;}
                        </td >
                        <td >
                        <!--// 첫칸 오른쪽1 (공휴일)-->
                        <!--@if($ind_holiday == 'Y' && $tmparr4[0] != null)-->
                            {@$outtext .= "<li class='holiday'>".$tmparr4[0]."</li>";}  <!--// 공휴일-->
                        <!--@end-->
                        <!--// 첫칸 오른쪽2 (음력/절기)-->
                        <!--@if($ind_lunar_all == 'Y' && $Calmain[$i][$j] != null)-->
                            {@$outtext .= "&nbsp;"."<span class='lunar'>".$tmpfld1."</span>";}  <!--// 음력 - 모든날자 표시-->
                        <!--@end-->
						<!--@if($ind_lunar == 'Y' && ($tmparr[2] == 1 || $tmparr[2] == 10 || $tmparr[2] == 15 || $tmparr[2] == 20))-->
							{@$outtext .= "&nbsp;"."<span class='lunar'>".$tmpfld1."</span>";}  <!--// 음력 - 1,10,15,20일 표시-->
						<!--@end-->
						<!--@if($ind_iljin == 'Y')-->  <!--// 일진 표시-->
							{@$outtext .= "&nbsp;"."<span class='lunar'>".substr($tmparr2[2], 0, 6)."</span>";}  <!--// 일진-->
						<!--@end-->
                        <!--@if($ind_24term == 'Y')-->  <!--// 절기 표시-->
                            {@$outtext .= "&nbsp;<li><span class='seasons24'>".$tmparr2[4]."</span></li>";}  <!--// 절기-->
						<!--@end-->
                        {@$outtext = "<ul >".$outtext."</ul>";}
                        {$outtext}  <!--// 음력, 절기-->
					    {@$outtext = null;}
                        </td>
                        <td {$td_middle}>
                        <!--// 두째칸(일정/플랜) -->
                        <!--@if(!empty($tmparr6[0]))-->
                            <!--@foreach($tmparr6 as $val)-->
                                {@$tmparr7=explode("|&Oslash;|",$val);}  <!--// 일정/플랜  2차 "|&Oslash;|",로 분리-->
                                <!--@if(!empty($tmparr7[0]))-->  <!--// 일정 있으면-->
                                    {@$lplan_cat = (!empty($tmparr7[5]))?"<span style='color:".$tmparr7[6].";'>[".$tmparr7[5]."] </span>":"";}  <!--// 분류-->
								    {@$lplan_state = null;}
									<!--@if(!empty($tmparr7[4]))-->
					  					{@$arr_icon = explode(",",$tmparr7[4]);}
										<!--@foreach($arr_icon as $icon)-->
											<!--@if($icon = trim($icon))-->
												<!--@if(file_exists($skinpath."images/icon/".$icon))-->
											    {@ $icon_folder = "";}
												<!--@elseif(file_exists($skinpath."images/icon/client/".$icon))-->
											    {@ $icon_folder = "client/";}
												<!--@elseif(file_exists($skinpath."images/icon/manager/".$icon))-->
											    {@ $icon_folder = "manager/";}
												<!--@end-->
												{@ $lplan_state .= "<img src='".$skinpath."images/icon/".$icon_folder.$icon."'/>";}  <!--//일정확인-->
											<!--@end-->
										<!--@end-->
									<!--@end-->
									{@$lplan_reply = (!empty($tmparr7[7]))?"<span class='small'>[".$tmparr7[7]."]</span>":"";}  <!--//댓글숫자-->

									{@$tmp_time = explode(",",$tmparr7[8]);}
 								    <!--@if($ind_duplicated_schedule == "N")-->  <!--// 중복금지 -->
									    {@$time_disply_fld = "[".$tmparr7[8]."]&#x0A;";}  <!--//선택내용 전부-->
								    <!--@else-->
									    <!--@if($tmparr7[8])-->
										    <!--@if($tmp_time[1])-->
											{@$time_disply_fld = "[".$tmp_time[0]."-".trim($tmp_time[count($tmp_time)-1])."] ";}  <!--// 일정 시간-->
										    <!--@else-->
											{@$time_disply_fld = "[".$tmp_time[0]."- ] ";}  <!--// 일정 시작시간-->
										    <!--@end-->
									    <!--@else--> 
											{@$time_disply_fld = null;}
										<!--@end-->  <!--//중복금지 끝-->
									<!--@end-->

								<!--// 배경색상 적용 옵션 반영 (단, 작성시 제목에 색상을 적용한 경우는 글자색이 그대로 유지됨)-->
								<!--@if($ind_bgcolor_option == "picker_bg")-->  <!--// 선택색상을->배경색-->
									{@$tmp_style = "style='clear:both; background-color:".$tmparr7[3]."; border-bottom:1px solid #FFFFFF;'";}
									{@$tmp_style1_0 = "style='float:left; background-color:".$tmparr7[3]."; border-bottom:1px solid #FFFFFF;'";}
									{@$tmp_style1_1 = "style='padding:5px 0 0 5px; background-color:".$tmparr7[3]."; border:medium double  #FFFFFF;'";}
									{@$tmp_style2 = "style='background-color:".$tmparr7[3].";'";}
								<!--@elseif($ind_bgcolor_option == "picker_text")-->  <!--// 선택색상을->글자색-->
									{@$tmp_style = "style='clear:both; color:".$tmparr7[3]."; border-bottom:1px solid #FFFFFF;'";}
									{@$tmp_style1_0 = "style='float:left; color:".$tmparr7[3]."; border-bottom:1px solid #FFFFFF;'";}
									{@$tmp_style1_1 = "style='padding:5px 0 0 5px; color:".$tmparr7[3]."; border:medium double ".$tmparr7[3].";'";}
									{@$tmp_style2 = "style='color:".$tmparr7[3].";'";}
								<!--@elseif($ind_bgcolor_option == "category_bg" && $ind_use_category == "Y")-->  <!--// 분류색상을->배경색-->
									{@$tmp_style = "style='clear:both; color:whitesmoke; background-color:".$tmparr7[6]."; border-bottom:1px solid #FFFFFF;'";}
									{@$tmp_style1_0 = "style='float:left; color:whitesmoke; background-color:".$tmparr7[6]."; border-bottom:1px solid #FFFFFF;'";}
									{@$tmp_style1_1 = "style='padding:5px 0 0 5px; color:whitesmoke; background-color:".$tmparr7[6]."; border:medium double #FFFFFF;'";}
									{@$tmp_style2 = "style='color:whitesmoke; background-color:".$tmparr7[6].";'";}
								<!--@elseif($ind_bgcolor_option == "category_text" && $ind_use_category == "Y")-->  <!--// 분류색상을->글자색-->
									{@$tmp_style = "style='clear:both; color:".$tmparr7[6]."; border-bottom:1px solid #FFFFFF;'";}
									{@$tmp_style1_0 = "style='float:left; color:".$tmparr7[6]."; border-bottom:1px solid #FFFFFF;'";}
									{@$tmp_style1_1 = "style='padding:5px 0 0 5px; color:".$tmparr7[6]."; border:medium double ".$tmparr7[6].";'";}
									{@$tmp_style2 = "style='color:".$tmparr7[6].";'";}
								<!--@else-->  <!--// 기본은 선택색상->배경색-->
									{@$tmp_style = "style='clear:both; background-color:".$tmparr7[3]."; border-bottom:1px solid #FFFFFF;'";}
									{@$tmp_style1_0 = "style='float:left; background-color:".$tmparr7[3]."; border-bottom:1px solid #FFFFFF;'";}
									{@$tmp_style1_1 = "style='padding:5px 0 0 5px; background-color:".$tmparr7[3]."; border:medium double  #FFFFFF;'";}
									{@$tmp_style2 = "style='background-color:".$tmparr7[3].";'";}
								<!--@end-->
									<!--//시간+일정제목-->
									<!--@if($ind_image_diary == "Y" && !empty($tmparr7[10]))-->
										<a {$tmp_style2} href='{$tmparr7[1]}' title='{$tmparr7[2]}'><img style='clear:both; float:left; border-bottom:1px solid #FFFFFF;' src='{$tmparr7[10]}'/>&nbsp;{$time_disply_fld}{$tmparr7[0]}</a>&nbsp;{$lplan_cat}{$lplan_state}{$lplan_reply}{$tmparr7[9]}<br/><div style='clear:both; border-bottom:1px solid #FFFFFF;'></div>
									<!--@elseif($ind_image_diary == "F" && !empty($tmparr7[10]))-->
										<a {$tmp_style2} href='{$tmparr7[1]}' title='{$tmparr7[2]}'><img style='clear:both; float:left; border-bottom:1px solid #FFFFFF;' src='{$tmparr7[10]}'/>&nbsp;" {$time_disply_fld}{$tmparr7[0]}</a>&nbsp;{$lplan_cat}{$lplan_state}{$lplan_reply}{$tmparr7[9]}<br/><div style='clear:both;border-bottom:1px solid #FFFFFF;'></div>
									<!--@else-->
										<a {$tmp_style2} href='{$tmparr7[1]}' title='{$time_disply_fld}{$tmparr7[2]}'>&nbsp;{$time_disply_fld}{$tmparr7[0]}</a>&nbsp;{$lplan_cat}{$lplan_state}{$lplan_reply}{$tmparr7[9]}<br/><div style='clear:both; border-bottom:1px solid #FFFFFF;'></div>
									<!--@end-->
								<!--@end-->  <!--// 일정 있으면 끝-->
                            <!--@end-->  <!--// end foreeach-->
                       <!--@end-->  <!--// end if-->
                     </td>
                     <td {$td_right}>
                        <!--// 셋째칸 두째줄(기념일) -->
						<!--@if($ind_memday == 'Y' && !empty($tmparr5[0]))-->  <!--// 기념일만 체크-->
							<li><span class='memorial'>{$tmparr5[0]}</span></li> <!--// 기념일-->
						 <!--@end-->
                     </td></tr>
                    <!--@end-->
                <!--@end-->  <!--//  달력상의 빈날제거-->
            <!--@end-->
        <!--@end-->
        </tbody>
    </table>
<!--@if($display_offset != $offset && $offset != null && $device != printer )-->
	Server time is <font color='blue'>{date("l, F j, Y, g:i a", $display_timestamp)}</font>
	and your time is <font color='blue'>{date("l, F j, Y, g:i a", $client_timestamp)}</font> : {($display_timestamp-$client_timestamp)*(-1)/3600}Hrs difference.
<!--@end-->
</div>

<!--// 관리자로 로그인 했을경우 리스트 출력 -->
<!--@if($grant->manager)-->
	<!--@if($module_info->display_doc_list != "N")-->
		<!--#include("./_style.list_planner.html")-->
	<!--@endif-->
<!--@else-->
	{@$write_ymd = date('Y',$wrk_timestamp)."-".date('m',$wrk_timestamp)."-".date('d',$wrk_timestamp)}
    <div class="buttonRight" style="float:right;">
        <a href="{getUrl('act','dispBoardWrite','document_srl','','extra_vars1',$write_ymd)}" class="buttonOfficial"><span>{$lang->cmd_write}</span></a>
    </div>
<!--@end-->
